<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExClase</title>
</head>

<body>
    Nombre<input type="text" id="nombre"><br> Apellidos
    <input type="text" id="apellidos"><br> Direccion
    <input type="text" id="direccion"><br> Fecha de Nacimiento<input type="text" id="fechaNacimiento"><br> Genero
    <input type="text" id="genero"><br> Codigo Postal<input type="text" id="codigoPostal"><br>
    <button onclick="crear();">Crear</button>
    <div id="midiv"></div>

    <script>
        class Persona {
            constructor(nombre, apellidos, direccion, fechaNacimiento, genero, codigoPostal) {
                this._nombre = nombre;
                this._apellidos = apellidos;
                this._direccion = direccion;
                this._fechaNacimiento = fechaNacimiento;
                this._genero = genero;
                this._codigoPostal = codigoPostal;
            }

            set nombre(x) {
                this._nombre = x;
            }
            get nombre() {
                return this._nombre;
            }
            set apellidos(x) {
                this._apellidos = x;
            }
            get apellidos() {
                return this._apellidos;
            }
            set direccion(x) {
                this._direccion = x;
            }
            get direccion() {
                return this._direccion;
            }
            set fechaNacimiento(x) {
                this._fechaNacimiento = x;
            }
            get fechaNacimiento() {
                return this._fechaNacimiento;
            }
            set genero(x) {
                this._genero = x;
            }
            get genero() {
                return this._genero;
            }
            set codigoPostal(x) {
                this._codigoPostal = x;
            }
            get codigoPostal() {
                return this._codigoPostal;
            }

            edad() {
                var fechaHoy = new Date();
                var fechaDada = this.fechaNacimiento;
                var edad = (fechaHoy.getFullYear() - fechaDada.getFullYear());
                if (fechaHoy.getMonth() == fechaDada.getMonth() && fechaHoy.getDate() < fechaDada.getDate()) {
                    edad--;
                }
                return edad;
            }

            señor_o_señora() {
                if (this.genero.toLowerCase == 'masculino') {
                    return 'Sr';
                } else if (this.genero.toLowerCase == 'femenino') {
                    return 'Sra';

                }
            }

            listarPersona() {
                var edad = this.edad();
                var señor_o_señora = this.señor_o_señora();
                var mes = parseInt(this.fechaNacimiento.getMonth()) + 1;
                var html = "<table border='1'><tr><th>Nombre</th><th>Apellidos</th><th>Edad</th><th>Direccion</th><th>Fecha de Nacimiento</th><th>Genero</th><th>Codigo Postal</th></tr>";
                html += '<tr><td>' + señor_o_señora + ' ' + this.nombre + '</td><td>' + this.apellidos + '</td><td>' + edad + '</td><td>' + this.direccion + '</td><td>' + this.fechaNacimiento.getDate() + '/' + mes + '/' + this.fechaNacimiento.getFullYear() + '</td><td>' + this.genero + '</td><td>' + this.codigoPostal + '</td></tr></table>';
                return html;
            }

            static listarPersonas() {
                var resultado = '';
                for (var i = 0; i < array.lenght; i++) {
                    resultado += listarPersona(array[i]);
                }
                return resultado;
            }



        }

        function crear() {
            var nombre = document.getElementById('nombre').value;
            var apellidos = document.getElementById('apellidos').value;
            var direccion = document.getElementById('direccion').value;
            var fechaNacimiento = document.getElementById('fechaNacimiento').value;
            var genero = document.getElementById('genero').value;
            var codigoPostal = document.getElementById('codigoPostal').value;

            var fecha = fechaNacimiento.split('/');
            var año = parseInt(fecha[2]);
            var mes = parseInt(fecha[1]) - 1;
            var dia = parseInt(fecha[0]);
            console.log(new Date(año, mes, dia));
            var persona = new Persona(nombre, apellidos, direccion, new Date(año, mes, dia), genero, codigoPostal);
            var lista = persona.listarPersona();
            console.log(lista);
            document.getElementById('midiv').innerHTML = lista;
        }
    </script>

</body>

</html>